\documentclass[a4paper,12pt]{report}

% Basic packages for LuaLaTeX with Unicode support
\usepackage{fontspec}
\usepackage[brazil]{babel}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{indentfirst}
\usepackage{setspace}

% Hyperref configuration
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
    pdftitle={Task 10: Customize Exception Handler},
    pdfauthor={Your Name},
    pdfsubject={Memory Management in x86},
    pdfkeywords={exception handler, page fault, x86}
}

% Code listing styling
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}

\lstset{style=mystyle}

\geometry{margin=2.5cm}
\onehalfspacing

\begin{document}

\chapter{Task 10: Customize Exception Handler}

\section{Task Description}
The goal of this task is to implement a custom page fault handler that prints "Falha de paginação" whenever a page fault occurs. This involves overriding the weak implementation of \texttt{page\_fault\_handler} provided in \texttt{helper.c}.

\section{Planned Implementation}
\begin{enumerate}
    \item Define the custom handler:
    \begin{itemize}
        \item Implement a function with the following prototype:
        \begin{lstlisting}[language=C]
        void page_fault_handler(struct state *s);
        \end{lstlisting}
        \item The function should print "Falha de paginação" using the \texttt{puts()} function.
        \item Optionally, include additional debugging information such as the faulting address (\texttt{cr2}) and error code.
    \end{itemize}
    \item Integrate the handler:
    \begin{itemize}
        \item Ensure the custom handler is linked into the project by including it in the appropriate \texttt{main.c} file.
        \item Replace the weak implementation of \texttt{page\_fault\_handler} in \texttt{helper.c}.
    \end{itemize}
    \item Test the handler:
    \begin{itemize}
        \item Trigger a page fault by accessing an unmapped memory address.
        \item Verify that the custom handler is invoked and the message "Falha de paginação" is displayed.
        \item Confirm that the system does not crash and gracefully handles the exception.
    \end{itemize}
\end{enumerate}

\section{Expected Outcome}
\begin{itemize}
    \item The custom page fault handler should replace the weak implementation in \texttt{helper.c}.
    \item When a page fault occurs, the message "Falha de paginação" should be printed to the console.
    \item Additional debugging information (if implemented) should provide insights into the fault.
\end{itemize}

\section{Implementation Details}
(To be filled after implementation)

\section{Challenges}
(To be filled after implementation)

\section{Final Outcome}
(To be filled after implementation)

\end{document}
